<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div class="row">
        <div class="col-md-12">
          <input placeholder="Type Attendance" ng-model="attendanceCode"/>
          <button class="btn btn-default" ng-click='setAttendance(attendanceCode)'>Set Attendance Code</button>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <br>
    </div>
    <div class="col-md-2 text-right">
      <button type="submit" class="btn btn-default" ng-click="exportCSV()">Export to CSV</button>
    </div>
  </div>

  <p>The delete user and user index api routes are restricted to users with the 'admin' role.</p>
  <div class="table-responsive">
      <table class="table table-hover">
      <thead>
        <tr>
            <td ng-click="setSortOrder('name')">Name</td>
            <td ng-click="setSortOrder('email')">Email</td>
            <td ng-click="setSortOrder('github.login')">Github</td>
            <td ng-click="setSortOrder('attendence')">Attendence</td>
            <td ng-click="setSortOrder('github.events.length')">Events</td>
            <td ng-click="setSortOrder('commits.length')">Commits</td>
            <td ng-click="setSortOrder('active')">Active</td>
        </tr>
      </thead>
      <tbody>
          <tr ng-repeat="user in users | orderBy:sortorder">
              <td><a href="/users/{{user.github.login}}/profile">{{ user.name }}</a></td>
              <td> {{ user.email }}</td>
              <td><a href="http://github.com/{{user.github.login}}">{{user.github.login}}</a></td>
              <td>{{ user.attendance.length }}</td>
              <td>{{ user.github.events.length }}</td>
              <td>{{ user.commits.length }}</td>
              <td><a class="btn btn-warning" href="#" role="button" ng-click="toggle( user )">{{ user.active }}</a></td>
          </tr>
      </tbody>
    </table>
  </div>
</div>
